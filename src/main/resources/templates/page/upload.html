<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>管理员上传书籍页面</title>
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <link rel="stylesheet" th:href="@{/css/xadmin.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/lib/layui/css/layui.css}"/>
    <script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/xadmin.js}"></script>
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
    <style type="text/css">
        /*a  upload */
        .a-upload, .a-uploadTxt {
            padding: 4px 10px;
            height: 20px;
            line-height: 20px;
            position: relative;
            cursor: pointer;
            color: #888;
            background: #fafafa;
            text-decoration: none;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
            display: inline-block;
            display: inline;
            zoom: 1
        }

        .a-upload input, .a-uploadTxt input {
            position: absolute;
            font-size: 100px;
            right: 0;
            top: 0;
            opacity: 0;
            filter: alpha(opacity=0);
            cursor: pointer
        }

        .a-upload:hover, .a-uploadTxt:hover {
            color: #444;
            background: #eee;
            border-color: #ccc;
            text-decoration: none
        }
    </style>
</head>
<body class="form-wrap">
<div class=" layui-fluid  layui-bg-white">
    <blockquote class="layui-elem-quote">上传电子书仅支持txt文件格式</blockquote>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
        <legend>书籍上传：普通txt电子书上传</legend>
    </fieldset>
    <form action="/ebook/add" method="post" enctype="multipart/form-data" class="layui-form">
        <div class="layui-form-item">
            <label for="ename" class="layui-form-label">
                <span class="x-red">*</span>书名
            </label>
            <div class="layui-input-inline">
                <input type="text" id="ename" name="ename" lay-verify="required"
                       required="required" autocomplete="off" class="layui-input"/>
            </div>
            <div class="layui-form-mid layui-word-aux">
                <span class="x-red"></span>
            </div>
        </div>
        <!-- 作者 -->
        <div class="layui-form-item">
            <label for="author" class="layui-form-label">
                <span class="x-red">*</span>作者
            </label>
            <div class="layui-input-inline">
                <input type="text" id="author" name="author" lay-verify="required"
                       required="required" autocomplete="off" class="layui-input"/>
            </div>
            <div class="layui-form-mid layui-word-aux">
                <span class="x-red"></span>
            </div>
        </div>
        <!-- 电子书种类 -->
        <div class="layui-form-item">
            <label for="txtFile" class="layui-form-label">
                <span class="x-red">*</span>电子书种类
            </label>
            <div class="layui-input-block">
                <div class="layui-inline">
                    <select name="sid">
                        <option th:each="so : ${sortList}" th:value="${so.sid}" th:text="${so.name}"></option>
                        <!--<option value="1">小说</option>-->
                        <!--<option value="2">计算机</option>-->
                        <!--<option value="3">名著</option>-->
                        <!--<option value="4">儿童</option>-->
                        <!--<option value="5">生活休闲</option>-->
                        <!--<option value="6">自然科学</option>-->
                        <!--<option value="7">哲学</option>-->
                        <!--<option value="8">游戏</option>-->
                        <!--<option value="9">其他</option>-->
                    </select>
                </div>
            </div>
        </div>

        <!-- 简介 -->
        <div class="layui-form-item">
            <label for="introduction" class="layui-form-label">
                <span class="x-red">*</span>简介
            </label>
            <div class="layui-input-inline" style="width: 250px;height: 200px;">
                <textarea style="width: 250px;height: 200px;resize:none;" id="introduction" name="introduction"
                          lay-verify="required" autocomplete="off" class="layui-input"/>
            </div>
            <div class="layui-form-mid layui-word-aux">
                <span class="x-red"></span>
            </div>
        </div>
        <div class="layui-form-item">
            <label for="txtFile" class="layui-form-label">
                <span class="x-red">*</span>txt文件
            </label>
            <div class="layui-input-inline">
                <a href="javascript:;" class="a-uploadTxt">
                    <input type="file" id="txtFile" name="txtFile" lay-verify="required"
                           required="required" autocomplete="off" class="layui-input"/><span>点击上传txt文件</span>
                </a>
            </div>
            <div class="layui-form-mid layui-word-aux">
                <span class="x-redTxt"></span>
            </div>
        </div>
        <div class="layui-form-item">
            <label for="coverImg" class="layui-form-label">
                <span class="x-red">*</span>封面文件
            </label>
            <div class="layui-input-inline">
                <a href="javascript:;" class="a-upload">
                    <input type="file" id="coverImg" name="coverImg" lay-verify="required" autocomplete="off"
                           required="required" class="layui-input"/><span>点击上传图片文件</span>
                </a>
            </div>
            <div class="layui-form-mid layui-word-aux">
                <span class="x-redImg"></span>
            </div>
        </div>
        <div class="layui-form-item">
            <label for="txtFile" class="layui-form-label">
            </label>
            <button class="layui-btn" lay-filter="add" lay-submit="">
                增加
            </button>
        </div>
    </form>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
        <legend>-</legend>
    </fieldset>
</div>

<script type="text/javascript" th:src="@{/lib/layui/layui.js}" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script type="text/javascript">
    $(".a-uploadTxt").on("change", "input[type='file']", function () {
        var filePath = $(this).val();
        if (filePath.indexOf("txt") != -1) {
            $(".x-redTxt").html("");
            $(".x-redTxt").css("color", "grey");
            var arr = filePath.split('\\');
            var fileName = arr[arr.length - 1];
            $(".x-redTxt").html(fileName);
        } else {
            $(".x-redTxt").html("");
            $(".x-redTxt").css("color", "red");
            $(".x-redTxt").html("*您上传文件类型有误！请上传txt文件").show();
            return false
        }
    });
    $(".a-upload").on("change", "input[type='file']", function () {
        var filePath = $(this).val();
        if (filePath.indexOf("jpg") != -1 || filePath.indexOf("png") != -1) {
            $(".x-redImg").html("");
            $(".x-redImg").css("color", "grey");
            var arr = filePath.split('\\');
            var fileName = arr[arr.length - 1];
            $(".x-redImg").html(fileName);
        } else {
            $(".x-redImg").html("");
            $(".x-redImg").css("color", "red");
            $(".x-redImg").html("*您上传文件类型有误！请上传jpg/png图片").show();
            return false
        }
    });
</script>

</body>

<script th:src="@{/js/fuqiang.js}" charset="utf-8"></script>
</html>